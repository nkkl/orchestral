<p id="notice"><%= notice %></p>

<h1>These are the musicians in this orchestra</h1>

<table>
  <thead>
    <tr>
      <th>Instrument</th>
      <th>Sponsored?</th>
      <th>Sponsor</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @musicians.each do |musician| %>
      <tr>
        <td><%= musician.instrument %></td>
        <td><%= musician.status %></td>
        <td><%= musician.sponsor %></td>
        <td>
        <% if musician.status != true %>
          <form id="checkout" method="post" action="/checkout">
            <div id="payment-form"></div>
            <input type="submit" value="Sponsor this musician">
            <%= hidden_field_tag :authenticity_token, form_authenticity_token %>
            <%= hidden_field_tag :id, musician.id %>
          </form>
        <% end %>
        </td>
<!--         <td><%= link_to 'Show', musician %></td>
        <td><%= link_to 'Edit', edit_musician_path(musician) %></td>
        <td><%= link_to 'Destroy', musician, method: :delete, data: { confirm: 'Are you sure?' } %></td> -->
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<!-- <%= link_to 'New Musician', new_musician_path %> -->
<script src="https://js.braintreegateway.com/v2/braintree.js"></script>

<script type="text/javascript">

  // We generated a client token for you so you can test out this code
  // immediately. In a production-ready integration, you will need to
  // generate a client token on your server (see section below).
  braintree.setup('<%= @client_token %>', "dropin", {
    container: "payment-form"
  });
</script>